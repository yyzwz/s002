"use strict";(self["webpackChunks002"]=self["webpackChunks002"]||[]).push([[2659,8387],{2659:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var s=function(){var e=this,a=e._self._c;return a("div",[a("Drawer",{attrs:{title:"导入花名册数据",closable:"",draggable:"",width:"1200"},model:{value:e.visible,callback:function(a){e.visible=a},expression:"visible"}},[a("car",[a("Row",[a("Form",{ref:"huasearchForm",attrs:{model:e.huasearchForm,inline:"","label-width":70}},[a("Form-item",{attrs:{label:"部门"}},[a("department-choose",{ref:"dep",staticStyle:{width:"600px"},on:{"on-change":e.handleSelectDep}})],1),a("Form-item",{attrs:{label:"姓名"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入姓名"},model:{value:e.huasearchForm.username,callback:function(a){e.$set(e.huasearchForm,"username",a)},expression:"huasearchForm.username"}})],1),a("Form-item",{attrs:{label:"工号"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入工号"},model:{value:e.huasearchForm.jobnumber,callback:function(a){e.$set(e.huasearchForm,"jobnumber",a)},expression:"huasearchForm.jobnumber"}})],1),a("Form-item",[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.huahandleSearch}},[e._v("搜索")]),a("Button",{on:{click:e.huahandleReset}},[e._v("重置")])],1)],1)],1),a("Row",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}]},[a("Alert",{attrs:{"show-icon":""}},[e._v(" 已选择 "),a("span",{staticClass:"select-count"},[e._v(e._s(e.huaselectCount))]),e._v(" 项 "),a("a",{staticClass:"select-clear",on:{click:e.huaclearSelectAll}},[e._v("清空")])])],1),a("Row",[a("Table",{ref:"table1",attrs:{loading:e.hualoading,border:"",columns:e.userColumns,data:e.huaData,sortable:"custom"},on:{"on-sort-change":e.huachangeSort,"on-row-dblclick":e.huashowHuaSelect}}),a("br")],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:e.huasearchForm.pageNumber,total:e.huaTotal,"page-size":e.huasearchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.huachangePage,"on-page-size-change":e.huachangePageSize}})],1),a("span",{staticStyle:{"font-size":"30px",color:"#f00"}},[e._v("请双击员工选择领用人!")]),a("br"),a("Button",{attrs:{type:"primary"},on:{click:e.closeWindow}},[e._v("退出")])],1)],1)],1)},l=[],i=t(5847),r=t(8387);const n={name:"add",components:{departmentChoose:r["default"]},props:{value:{type:Boolean,default:!1},data:{type:Object}},watch:{value(e){this.setCurrentValue(e)},visible(e){this.$emit("input",e)}},data(){return{showValue:!1,visible:this.value,title:"",submitLoading:!1,maxHeight:510,form:{},formValidate:{},roleList:[],userColumns:[{title:"姓名",key:"username",minWidth:100,sortable:!0},{title:"部门",key:"departmentTitle",minWidth:150,sortable:!0},{title:"工号",key:"jobnumber",sortable:!0,sortType:"desc",minWidth:100}],isImportHuaData:!0,huasearchForm:{pageNumber:1,pageSize:10,username:"",groupId:"",departmentId:""},selectHuaList:[],selectHuaCount:[],huaData:[]}},methods:{init(){this.getHuaUserList()},handleSelectDep(e){var a=this;e.forEach((function(e){a.huasearchForm.departmentId=e.id}))},huashowHuaSelect(e){this.$emit("submited",e)},setCurrentValue(e){e!==this.visible&&(this.visible=e)},closeWindow(){this.visible=!1},huahandleSearch(){this.huasearchForm.pageNumber=1,this.huasearchForm.pageSize=10,this.getHuaUserList()},huahandleReset(){this.$refs.huasearchForm.resetFields(),this.huasearchForm.nickname="",this.huasearchForm.pageNumber=1,this.huasearchForm.pageSize=10,this.huasearchForm.departmentId="",this.getHuaUserList()},huaclearSelectAll(){this.$refs.table1.selectAll(!1)},huachangePage(e){this.huasearchForm.pageNumber=e,this.getHuaUserList(),this.huaclearSelectAll()},huachangePageSize(e){this.huasearchForm.pageSize=e,this.getHuaUserList()},huaAddData(){var e=this;this.huaselectCount<=0?this.$Message.warning("您还未选择要从花名册导入的数据"):this.$Modal.confirm({title:"确认导入",content:"您确认要导入所选的 "+this.huaselectCount+" 条数据?",loading:!0,onOk:()=>{let a="";this.huaselectList.forEach((function(t){a+=t.nickname+",",a=a.substring(0,a.length-1),this.$Modal.remove(),this.$Message.success("导入成功"),this.isImportHuaData=!1,e.form.inPeople=a}))}})},getHuaUserList(){this.hualoading=!0,(0,i.jv)(this.huasearchForm).then((e=>{this.hualoading=!1,e.success&&(this.huaData=e.result.records,this.huaTotal=e.result.total)}))}},mounted(){this.init()}},h=n;var o=t(1001),u=(0,o.Z)(h,s,l,!1,null,null,null);const c=u.exports},8387:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var s=function(){var e=this,a=e._self._c;return a("div",[a("Cascader",{attrs:{data:e.department,"load-data":e.loadData,"change-on-select":"",filterable:"",clearable:"",placeholder:"选择部门"},on:{"on-change":e.handleChangeDep},model:{value:e.selectDep,callback:function(a){e.selectDep=a},expression:"selectDep"}})],1)},l=[],i=t(7877);const r={name:"departmentChoose",props:{},data(){return{selectDep:[],department:[]}},methods:{initDepartmentData(){(0,i.E5)().then((e=>{e.success&&(e.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1==e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),this.department=e.result)}))},loadData(e,a){e.loading=!0,(0,i.E5)({parentId:e.value}).then((t=>{e.loading=!1,t.success&&(t.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1==e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),e.children=t.result,a())}))},handleChangeDep(e,a){let t="";e&&e.length>0&&(t=e[e.length-1]),this.$emit("on-change",t)},clearSelect(){this.selectDep=[]}},mounted(){this.initDepartmentData()}},n=r;var h=t(1001),o=(0,h.Z)(n,s,l,!1,null,null,null);const u=o.exports},5847:(e,a,t)=>{t.d(a,{$l:()=>d,$z:()=>r,Gk:()=>o,Gq:()=>i,MK:()=>l,Ox:()=>c,Pl:()=>n,f:()=>m,jv:()=>h,lx:()=>p,rp:()=>u,x6:()=>g});var s=t(7184);const l=e=>(0,s.A_)("/adminAssets/getByPage",e),i=e=>(0,s.A_)("/adminAssets/getByMyApplyPage",e),r=e=>(0,s.A_)("/adminAssets/getByNotAuditPage",e),n=e=>(0,s.j0)("/adminAssets/delByIds",e),h=e=>(0,s.A_)("/user/getByPage",e),o=e=>(0,s.j0)("/adminAssets/outWage",e),u=e=>(0,s.A_)("/user/getAutoCompleteNames",e),c=e=>(0,s.A_)("/adminAssetWare/getAll",e),d=e=>(0,s.j0)("/adminAssets/apply",e),m=e=>(0,s.j0)("/adminAssets/disApply",e),p=e=>(0,s.j0)("/adminAssets/applySuccess",e),g=e=>(0,s.j0)("/adminAssets/applyFail",e)}}]);