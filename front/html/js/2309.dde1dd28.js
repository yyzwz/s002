"use strict";(self["webpackChunks002"]=self["webpackChunks002"]||[]).push([[2309],{2309:(t,a,e)=>{e.r(a),e.d(a,{default:()=>m});var i=function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-line",staticStyle:{display:"inline-block"}},[a("Button",{attrs:{type:"primary",size:"small",ghost:"",shape:"circle",icon:"md-add"},on:{click:t.startImportData}},[t._v("初期元器件导入")]),a("Drawer",{attrs:{title:"导入数据",closable:"",width:"1000"},model:{value:t.importModalVisible,callback:function(a){t.importModalVisible=a},expression:"importModalVisible"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[a("Upload",{attrs:{action:"","before-upload":t.beforeUploadImport,accept:".xls, .xlsx"}},[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{loading:t.reading,icon:"ios-cloud-upload-outline"}},[t._v("上传Excel文件")]),t.uploadfile.name?a("span",[t._v("当前选择文件："+t._s(t.uploadfile.name))]):t._e()],1),a("Button",{attrs:{icon:"md-trash"},on:{click:t.clearImportData}},[t._v("清空数据")])],1),a("Alert",{attrs:{type:"warning","show-icon":""}},[t._v("导入前请下载查看导入模版数据文件查看所需字段及说明，确保数据格式正确，不得修改列英文名称")]),a("Table",{ref:"importTable",attrs:{columns:t.importColumns,border:"",height:t.height,data:t.importTableData}}),a("div",{staticClass:"drawer-footer"},[a("div",{staticStyle:{position:"absolute",right:"15px",display:"inline-block"}},[a("Button",{on:{click:function(a){t.importModalVisible=!1}}},[t._v("关闭")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.importLoading,disabled:t.importTableData.length<=0,type:"primary"},on:{click:t.importData}},[t._v(" 确认导入 "),t.importTableData.length>0?a("span",[t._v(t._s(t.importTableData.length)+" 条数据")]):t._e()])],1)])],1)],1)},s=[],o=e(8491),l=e(805);const r={name:"line-chart",components:{},props:{},data(){return{importModalVisible:!1,importTableData:[],importColumns:[],reading:!1,uploadfile:{name:""},importLoading:!1}},methods:{init(){},startImportData(){this.importModalVisible=!0},beforeUploadImport(t){this.uploadfile=t;const a=t.name.split(".").pop().toLocaleLowerCase();return"xlsx"==a||"xls"==a?(this.readFile(t),this.file=t):this.$Notice.warning({title:"文件类型错误",desc:"所选文件‘ "+t.name+" ’不是EXCEL文件，请选择后缀为.xlsx或者.xls的EXCEL文件。"}),!1},readFile(t){this.reading=!0;const a=new FileReader;a.readAsArrayBuffer(t),a.onerror=t=>{this.reading=!1,this.$Message.error("文件读取出错")},a.onload=t=>{const a=t.target.result,{header:e,results:i}=l.ZP.read(a,"array"),s=e.map((t=>({title:t,key:t,minWidth:130,align:"center"})));this.importTableData=i,this.importColumns=s,this.reading=!1,this.$Message.success("读取数据成功")}},clearImportData(){this.importTableData=[],this.importColumns=[],this.uploadfile={}},importData(){this.importLoading=!0,(0,o.dk)(this.importTableData).then((t=>{this.importLoading=!1,t.success&&(this.importModalVisible=!1,this.$Modal.info({title:"导入结果",content:t.message}))}))}},mounted(){this.init()}},n=r;var d=e(1001),p=(0,d.Z)(n,i,s,!1,null,"790dab2f",null);const m=p.exports},8491:(t,a,e)=>{e.d(a,{B9:()=>r,Ip:()=>o,SV:()=>l,Vv:()=>s,dk:()=>m,il:()=>p,o5:()=>d,qw:()=>n});var i=e(7184);const s=t=>(0,i.A_)("/adminAsset/getByPage",t),o=t=>(0,i.j0)("/adminAsset/insert",t),l=t=>(0,i.j0)("/adminAsset/update",t),r=t=>(0,i.j0)("/adminAsset/delByIds",t),n=t=>(0,i.A_)("/adminAssetUnit/getAll",t),d=t=>(0,i.A_)("/adminAssetSupplier/getByPage",t),p=t=>(0,i.A_)("/adminAssetType/getCascader",t),m=t=>(0,i.oZ)("/adminAssets/importData",t)}}]);